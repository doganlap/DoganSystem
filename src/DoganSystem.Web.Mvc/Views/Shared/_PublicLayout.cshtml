@using System.Globalization
@using Microsoft.Extensions.Localization
@using Microsoft.Extensions.Configuration
@using DoganSystem.Localization
@inject IStringLocalizer<GrcResource> L
@inject IConfiguration Configuration
@{
    Layout = null;
    var currentCulture = CultureInfo.CurrentUICulture.Name;
    var isRtl = currentCulture.StartsWith("ar");
    var dir = isRtl ? "rtl" : "ltr";

    // Read supported languages from configuration (no hardcoding)
    var supportedLanguages = Configuration.GetSection("Abp:Localization:SupportedLanguages").Get<string[]>()
        ?? new[] { "ar", "en" };
    var languageDisplayNames = new Dictionary<string, string>
    {
        { "ar", "العربية" },
        { "en", "English" },
        { "fr", "Français" },
        { "de", "Deutsch" },
        { "es", "Español" },
        { "tr", "Türkçe" },
        { "zh", "中文" },
        { "ja", "日本語" }
    };
}
<!DOCTYPE html>
<html lang="@currentCulture" dir="@dir">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - @L["Brand:Name"]</title>
    <meta name="description" content="@L["Meta:Description"]" />
    <meta name="keywords" content="@L["Meta:Keywords"]" />
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />
    
    <!-- Bootstrap 5 CSS with RTL support -->
    @if (isRtl)
    {
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet" />
        <style>
            body { font-family: 'Cairo', 'Tajawal', sans-serif; }
        </style>
    }
    else
    {
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    }
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/public.css" asp-append-version="true" />
    
    @await RenderSectionAsync("Styles", required: false)
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="@Url.Action("Index", "Public")">
                <span class="text-primary">@L["Brand:FirstName"]</span>
                <span class="text-dark">@L["Brand:LastName"]</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mainNavbar">
                <ul class="navbar-nav @(isRtl ? "me-auto" : "ms-auto") mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Public" asp-action="Index">@L["Menu:Home"]</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            @L["Menu:Services"]
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" asp-controller="Public" asp-action="Services">@L["Menu:AllServices"]</a></li>
                            <li><hr class="dropdown-divider" /></li>
                            <li><a class="dropdown-item" href="#">@L["Services:Telecom:Short"]</a></li>
                            <li><a class="dropdown-item" href="#">@L["Services:DataCenter:Short"]</a></li>
                            <li><a class="dropdown-item" href="#">@L["Services:Cybersecurity:Short"]</a></li>
                            <li><a class="dropdown-item" href="#">@L["Services:Governance:Short"]</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            @L["Menu:Industries"]
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" asp-controller="Public" asp-action="Industries">@L["Industries:Government:Short"]</a></li>
                            <li><a class="dropdown-item" href="#">@L["Industries:Telecom:Short"]</a></li>
                            <li><a class="dropdown-item" href="#">@L["Industries:Utilities:Short"]</a></li>
                            <li><a class="dropdown-item" href="#">@L["Industries:Infrastructure:Short"]</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Public" asp-action="Credentials">@L["Menu:Credentials"]</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Public" asp-action="About">@L["Menu:About"]</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Public" asp-action="Insights">@L["Menu:Insights"]</a>
                    </li>
                </ul>
                
                <!-- Language Switcher (dynamic from configuration) -->
                <ul class="navbar-nav @(isRtl ? "me-2" : "ms-2")">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            @(languageDisplayNames.GetValueOrDefault(currentCulture.Split('-')[0], currentCulture))
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            @foreach (var lang in supportedLanguages)
                            {
                                var displayName = languageDisplayNames.GetValueOrDefault(lang, lang);
                                var isActive = currentCulture.StartsWith(lang);
                                <li><a class="dropdown-item @(isActive ? "active" : "")" href="?culture=@lang&ui-culture=@lang">@displayName</a></li>
                            }
                        </ul>
                    </li>
                </ul>
                
                <ul class="navbar-nav @(isRtl ? "me-3" : "ms-3")">
                    <li class="nav-item">
                        <a class="btn btn-primary" asp-controller="Public" asp-action="Contact">@L["Menu:Contact"]</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        @RenderBody()
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5 mt-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5 class="fw-bold mb-3">
                        <span class="text-primary">@L["Brand:FirstName"]</span>
                        <span class="text-light">@L["Brand:LastName"]</span>
                    </h5>
                    <p class="text-secondary">@L["Footer:Description"]</p>
                </div>
                <div class="col-lg-4">
                    <h6 class="fw-bold mb-3">@L["Footer:Company"]</h6>
                    <ul class="list-unstyled">
                        <li><a href="@Url.Action("About", "Public")" class="text-secondary text-decoration-none">@L["Menu:About"]</a></li>
                        <li><a href="@Url.Action("Services", "Public")" class="text-secondary text-decoration-none">@L["Menu:Services"]</a></li>
                        <li><a href="@Url.Action("Industries", "Public")" class="text-secondary text-decoration-none">@L["Menu:Industries"]</a></li>
                        <li><a href="@Url.Action("Credentials", "Public")" class="text-secondary text-decoration-none">@L["Menu:Credentials"]</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h6 class="fw-bold mb-3">@L["Footer:ContactUs"]</h6>
                    <p class="text-secondary">
                        @L["Footer:Location"]<br />
                        <a href="mailto:info@doganconsult.com" class="text-secondary">info@doganconsult.com</a>
                    </p>
                </div>
            </div>
            <hr class="my-4 border-secondary" />
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0 text-secondary small">@L["Footer:Copyright"]</p>
                </div>
                <div class="col-md-6 @(isRtl ? "text-md-start" : "text-md-end")">
                    <a href="#" class="text-secondary small text-decoration-none @(isRtl ? "ms-3" : "me-3")">@L["Footer:Privacy"]</a>
                    <a href="#" class="text-secondary small text-decoration-none @(isRtl ? "ms-3" : "me-3")">@L["Footer:Terms"]</a>
                    <a href="#" class="text-secondary small text-decoration-none">@L["Footer:Accessibility"]</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
